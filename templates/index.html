<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Screenshot to Code</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h2>Upload Screenshot</h2>

  <input type="file" id="fileInput">
  <button id="generateBtn">Generate Code</button>

  <h3>Generated HTML</h3>
  <pre id="output"></pre>

  <h3>Preview</h3>
  <div id="preview"></div>

  <script>

    const fileInput = document.getElementById('fileInput');
    const generateBtn = document.getElementById('generateBtn');
    const output = document.getElementById('output');
    const preview = document.getElementById('preview');

    generateBtn.onclick = async () => {
        const file = fileInput.files[0];
        if (!file) {
        alert('Please select an image first!');
        return;
        }

        const formData = new FormData();
        formData.append('file', file);

        const res = await fetch('/generate', { method: 'POST', body: formData });
        const data = await res.json();

        if (data.html_code) {
        output.textContent = data.html_code;
        preview.innerHTML = data.html_code;

        // Create download link
        const blob = new Blob([data.html_code], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'generated_ui.html';
        link.textContent = 'ðŸ’¾ Download HTML File';
        link.style.display = 'block';
        link.style.marginTop = '10px';
        document.body.appendChild(link);
        } else {
        alert('Error: ' + data.error);
        }
    };
  </script>
</body>
</html>
